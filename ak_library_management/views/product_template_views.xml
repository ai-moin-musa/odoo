<?xml version="1.0" encoding="utf-8"?>
<data>
    <odoo>
        <!--product form view-->
        <record id="product_template_form_view" model="ir.ui.view">
            <field name="name">product.template.product.form</field>
            <field name="model">product.template</field>
            <field name="priority">10</field>
            <field name="inherit_id" ref="product.product_template_only_form_view"/>
            <field name="arch" type="xml">
                <!--put buttons in side the header for the book availability status-->
                <xpath expr="//header" position="inside">
                    <button name="change_status" string="Mark as Available" invisible="status == 'available'" type="object"/>
                    <button name="change_status" string="Mark as Borrowed" invisible="status == 'borrowed'" type="object"/>
                    <button name="action_pass" string="Borrow" type="object"/>
                    <field name="status" widget="statusbar" statusbar_visible="available,borrowed" options="{'clickable':'1'}"/>
                </xpath>
                <!--creating a book details tab and put inside the all field of the product_template-->
                <xpath expr="//sheet[@name='product_form']//notebook" position="inside">
                    <page string="Book Details">
                        <group>
                            <group>
                                <field name="is_library_book"/>
                                <field name="author" required="sale_ok == True"/>
                                <field name="publisher" required="sale_ok == True"/>
                            </group>
                            <group>
                                <field name="edition" required="sale_ok == True"/>
                                <field name="published_date" required="sale_ok == True"/>
                                <field name="pages" required="sale_ok == True"/>
                                <field name="available" required="sale_ok == True"/>
                            </group>
                        </group>
                    </page>
                </xpath>
                <!--move the barcode field in the book details tab-->
                <xpath expr="//field[@name='is_library_book']" position="after">
                    <xpath expr="//sheet//notebook//page[@name='general_information']//field[@name='barcode']" position="move"/>
                </xpath>
                <!--add attribute to cost price if sale check box checked then cost price is non-editable -->
                <xpath expr="//field[@name='standard_price']" position="attributes">
                    <attribute name="readonly">sale_ok == True</attribute>
                </xpath>
            </field>
        </record>

        <!--Update the window action for ‘Quotations’ in the sales module and modified the action-->
        <record id="sale.action_quotations_with_onboarding" model="ir.actions.act_window">
            <field name="name">Draft Quotations</field>
            <field name="view_mode">list</field>
        </record>
    </odoo>
</data>
